<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì´í”ŒìŠ¤í† ë¦¬ ë¬´ê¸°ìƒì </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <header class="header">
            <h1><i class="fas fa-store"></i> ë©”ì´í”ŒìŠ¤í† ë¦¬ ë¬´ê¸°ìƒì </h1>
            <p>ì•„ì´í…œ êµ¬ë§¤, íŒë§¤, ê°•í™”ë¥¼ í•œ ê³³ì—ì„œ</p>
        </header>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="shop">
                <i class="fas fa-store"></i> ìƒì 
            </button>
            <button class="nav-tab" data-tab="enhancement">
                <i class="fas fa-magic"></i> ê°•í™”
            </button>
            <button class="nav-tab" data-tab="trade">
                <i class="fas fa-exchange-alt"></i> ê±°ë˜
            </button>
            <button class="nav-tab" data-tab="management">
                <i class="fas fa-cogs"></i> ê´€ë¦¬
            </button>
        </nav>

        <!-- ìƒì  íƒ­ -->
        <main class="tab-content active" id="shop-tab">
            <div class="shop-container">
                <div class="shop-header">
                    <h2><i class="fas fa-list"></i> íŒë§¤ ì•„ì´í…œ</h2>
                    <div class="shop-controls">
                        <select id="itemTypeFilter" onchange="filterItems()">
                            <option value="">ì „ì²´ íƒ€ì…</option>
                            <option value="í•œì†ê²€">âš”ï¸ í•œì†ê²€</option>
                            <option value="í™œ">ğŸ¹ í™œ</option>
                            <option value="ì§€íŒ¡ì´">ğŸ”® ì§€íŒ¡ì´</option>
                        </select>
                        <button class="btn btn-primary" onclick="loadItems()">
                            <i class="fas fa-sync-alt"></i> ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>
                <div class="items-grid" id="itemsList">
                    <!-- ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </main>

        <!-- ê°•í™” íƒ­ -->
        <main class="tab-content" id="enhancement-tab">
            <div class="enhancement-container">
                <div class="enhancement-left">
                    <h2><i class="fas fa-list"></i> ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œ</h2>
                    <div class="items-grid" id="enhanceableItemsList">
                        <!-- ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                <div class="enhancement-right">
                    <h2><i class="fas fa-cog"></i> ê°•í™” ì„¤ì •</h2>
                    <div class="enhancement-form">
                        <div class="form-group">
                            <label>ëª©í‘œ ê°•í™” ë ˆë²¨:</label>
                            <select id="enhancementTarget" onchange="updateEnhancementInfo()">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>
                        <div class="enhancement-info">
                            <div class="info-row">
                                <span>í˜„ì¬ ë ˆë²¨:</span>
                                <span id="currentLevel">-</span>
                            </div>
                            <div class="info-row">
                                <span>ì„±ê³µë¥ :</span>
                                <span id="successRate">-</span>
                            </div>
                            <div class="info-row">
                                <span>ê°•í™” ë¹„ìš©:</span>
                                <span id="enhancementCost">-</span>
                            </div>
                        </div>
                        <button class="btn btn-success" id="enhanceBtn" onclick="executeEnhancement()" disabled>
                            <i class="fas fa-magic"></i> ê°•í™” ì‹¤í–‰
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ê±°ë˜ íƒ­ -->
        <main class="tab-content" id="trade-tab">
            <div class="trade-container">
                <div class="trade-left">
                    <h2><i class="fas fa-shopping-cart"></i> êµ¬ë§¤</h2>
                    <div class="items-list" id="shopItemsList">
                        <!-- ìƒì  ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                <div class="trade-right">
                    <h2><i class="fas fa-tags"></i> íŒë§¤</h2>
                    <div class="items-list" id="playerItemsList">
                        <!-- í”Œë ˆì´ì–´ ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                    <div class="trade-summary">
                        <h3>ê±°ë˜ ì •ë³´</h3>
                        <div class="summary-item">
                            <span>ì„ íƒëœ ì•„ì´í…œ:</span>
                            <span id="selectedItemName">ì—†ìŒ</span>
                        </div>
                        <div class="summary-item">
                            <span>ê±°ë˜ ê°€ê²©:</span>
                            <span id="tradePrice">0</span>
                        </div>
                        <div class="trade-actions">
                            <button class="btn btn-success" id="buyBtn" onclick="buyItem()" disabled>êµ¬ë§¤</button>
                            <button class="btn btn-warning" id="sellBtn" onclick="sellItem()" disabled>íŒë§¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ê´€ë¦¬ íƒ­ -->
        <main class="tab-content" id="management-tab">
            <div class="management-container">
                <h2><i class="fas fa-plus-circle"></i> ì•„ì´í…œ ì¶”ê°€</h2>
                <form class="add-item-form" id="itemForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>ì•„ì´í…œ ì´ë¦„:</label>
                            <input type="text" id="itemName" required>
                        </div>
                        <div class="form-group">
                            <label>ê°€ê²©:</label>
                            <input type="number" id="itemPrice" min="0" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>íƒ€ì…:</label>
                            <select id="itemType" required>
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="í•œì†ê²€">âš”ï¸ í•œì†ê²€</option>
                                <option value="í™œ">ğŸ¹ í™œ</option>
                                <option value="ì§€íŒ¡ì´">ğŸ”® ì§€íŒ¡ì´</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ê³µê²©ë ¥:</label>
                            <input type="number" id="attackPower" min="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ì„¤ëª…:</label>
                        <textarea id="description" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-plus"></i> ì•„ì´í…œ ì¶”ê°€
                    </button>
                </form>
            </div>
        </main>

        <!-- ë©”ì‹œì§€ ì•Œë¦¼ -->
        <div id="message" class="message"></div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let items = [];
        let selectedEnhancementItem = null;
        let selectedTradeItem = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            initTabs();
            loadItems();
            loadEnhanceableItems();
            loadShopItems();
            setupForm();
        });

        // íƒ­ ì´ˆê¸°í™”
        function initTabs() {
            const tabs = document.querySelectorAll('.nav-tab');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.dataset.tab;
                    
                    // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));
                    
                    // ì„ íƒëœ íƒ­ í™œì„±í™”
                    tab.classList.add('active');
                    document.getElementById(`${targetTab}-tab`).classList.add('active');
                });
            });
        }

        // ì•„ì´í…œ ëª©ë¡ ë¡œë“œ
        async function loadItems() {
            try {
                showMessage('ì•„ì´í…œì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'loading');
                const response = await fetch('/api/maple-shop/items');
                if (response.ok) {
                    items = await response.json();
                    displayItems(items);
                    hideMessage();
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            } catch (error) {
                showMessage('ì•„ì´í…œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ì•„ì´í…œ í‘œì‹œ
        function displayItems(itemsToShow) {
            const container = document.getElementById('itemsList');
            container.innerHTML = '';

            if (itemsToShow.length === 0) {
                container.innerHTML = '<p class="empty-message">ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }

            itemsToShow.forEach(item => {
                const itemElement = createItemElement(item);
                container.appendChild(itemElement);
            });
        }

        // ì•„ì´í…œ ìš”ì†Œ ìƒì„±
        function createItemElement(item) {
            const element = document.createElement('div');
            element.className = 'item-card';
            
            const icon = getItemIcon(item.itemType);
            const rarityClass = getRarityClass(item.attackPower);

            element.innerHTML = `
                <div class="item-icon ${rarityClass}">${icon}</div>
                <div class="item-info">
                    <div class="item-name">${item.name}</div>
                    <div class="item-type">${item.itemType}</div>
                    <div class="item-stats">
                        <span>ê³µê²©ë ¥: ${item.attackPower}</span>
                        <span>ë ˆë²¨: ${item.requiredLevel}</span>
                    </div>
                </div>
                <div class="item-price">${item.price.toLocaleString()} ë©”ì†Œ</div>
                <div class="item-actions">
                    <button class="btn btn-sm" onclick="editItem(${item.id})">ìˆ˜ì •</button>
                    <button class="btn btn-sm btn-danger" onclick="deleteItem(${item.id})">ì‚­ì œ</button>
                </div>
            `;

            return element;
        }

        // ì•„ì´í…œ í•„í„°ë§
        function filterItems() {
            const typeFilter = document.getElementById('itemTypeFilter').value;
            const filteredItems = typeFilter ? 
                items.filter(item => item.itemType === typeFilter) : 
                items;
            displayItems(filteredItems);
        }

        // ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œ ë¡œë“œ
        async function loadEnhanceableItems() {
            try {
                const response = await fetch('/api/enhancement/items/1');
                if (response.ok) {
                    const enhanceableItems = await response.json();
                    displayEnhanceableItems(enhanceableItems);
                }
            } catch (error) {
                // ë¬´ì‹œ
            }
        }

        // ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œ í‘œì‹œ
        function displayEnhanceableItems(items) {
            const container = document.getElementById('enhanceableItemsList');
            container.innerHTML = '';

            if (items.length === 0) {
                container.innerHTML = '<p class="empty-message">ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }

            items.forEach(item => {
                const element = createEnhanceableItemElement(item);
                container.appendChild(element);
            });
        }

        // ê°•í™” ê°€ëŠ¥í•œ ì•„ì´í…œ ìš”ì†Œ ìƒì„±
        function createEnhanceableItemElement(item) {
            const element = document.createElement('div');
            element.className = 'item-card enhanceable';
            element.onclick = () => selectItemForEnhancement(item);

            const icon = getItemIcon(item.itemType);
            const rarityClass = getRarityClass(item.attackPower);

            element.innerHTML = `
                <div class="item-icon ${rarityClass}">${icon}</div>
                <div class="item-info">
                    <div class="item-name">${item.name}</div>
                    <div class="item-type">${item.itemType}</div>
                    <div class="item-level">ê°•í™” +${item.enhancementLevel || 0}</div>
                </div>
            `;

            return element;
        }

        // ê°•í™”ìš© ì•„ì´í…œ ì„ íƒ
        function selectItemForEnhancement(item) {
            selectedEnhancementItem = item;
            updateEnhancementForm(item);
        }

        // ê°•í™” í¼ ì—…ë°ì´íŠ¸
        function updateEnhancementForm(item) {
            const currentLevel = item.enhancementLevel || 0;
            const maxLevel = 20;

            // ëª©í‘œ ë ˆë²¨ ì˜µì…˜ ìƒì„±
            const targetSelect = document.getElementById('enhancementTarget');
            targetSelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš”</option>';
            
            for (let i = currentLevel + 1; i <= maxLevel; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `+${i}`;
                targetSelect.appendChild(option);
            }

            // ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('currentLevel').textContent = `+${currentLevel}`;
            document.getElementById('successRate').textContent = '-';
            document.getElementById('enhancementCost').textContent = '-';
            document.getElementById('enhanceBtn').disabled = true;
        }

        // ê°•í™” ì •ë³´ ì—…ë°ì´íŠ¸
        async function updateEnhancementInfo() {
            const targetLevel = document.getElementById('enhancementTarget').value;
            if (!targetLevel || !selectedEnhancementItem) return;

            try {
                const response = await fetch(`/api/enhancement/info/${selectedEnhancementItem.id}?playerId=1`);
                if (response.ok) {
                    const info = await response.json();
                    document.getElementById('successRate').textContent = `${info.successRate}%`;
                    document.getElementById('enhancementCost').textContent = `${info.cost.toLocaleString()} ë©”ì†Œ`;
                    document.getElementById('enhanceBtn').disabled = false;
                }
            } catch (error) {
                showMessage('ê°•í™” ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ê°•í™” ì‹¤í–‰
        async function executeEnhancement() {
            if (!selectedEnhancementItem) {
                showMessage('ê°•í™”í•  ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”.', 'error');
                return;
            }

            const targetLevel = document.getElementById('enhancementTarget').value;
            if (!targetLevel) {
                showMessage('ëª©í‘œ ê°•í™” ë ˆë²¨ì„ ì„ íƒí•˜ì„¸ìš”.', 'error');
                return;
            }

            try {
                showMessage('ê°•í™”ë¥¼ ì‹¤í–‰í•˜ëŠ” ì¤‘...', 'loading');
                const response = await fetch('/api/enhancement/execute', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        itemId: selectedEnhancementItem.id,
                        playerId: 1,
                        currentLevel: selectedEnhancementItem.enhancementLevel || 0,
                        targetLevel: parseInt(targetLevel)
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    showMessage(result.message, result.success ? 'success' : 'error');
                    loadEnhanceableItems();
                } else {
                    showMessage('ê°•í™” ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showMessage('ê°•í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ìƒì  ì•„ì´í…œ ë¡œë“œ
        async function loadShopItems() {
            try {
                const response = await fetch('/api/maple-shop/items');
                if (response.ok) {
                    const shopItems = await response.json();
                    displayShopItems(shopItems);
                }
            } catch (error) {
                // ë¬´ì‹œ
            }
        }

        // ìƒì  ì•„ì´í…œ í‘œì‹œ
        function displayShopItems(items) {
            const container = document.getElementById('shopItemsList');
            container.innerHTML = '';

            if (items.length === 0) {
                container.innerHTML = '<p class="empty-message">íŒë§¤ ì¤‘ì¸ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }

            items.forEach(item => {
                const element = createShopItemElement(item);
                container.appendChild(element);
            });
        }

        // ìƒì  ì•„ì´í…œ ìš”ì†Œ ìƒì„±
        function createShopItemElement(item) {
            const element = document.createElement('div');
            element.className = 'item-card shop-item';
            element.onclick = () => selectItemForTrade(item, 'buy');

            const icon = getItemIcon(item.itemType);
            const rarityClass = getRarityClass(item.attackPower);

            element.innerHTML = `
                <div class="item-icon ${rarityClass}">${icon}</div>
                <div class="item-info">
                    <div class="item-name">${item.name}</div>
                    <div class="item-type">${item.itemType}</div>
                    <div class="item-price">${item.price.toLocaleString()} ë©”ì†Œ</div>
                </div>
            `;

            return element;
        }

        // ê±°ë˜ìš© ì•„ì´í…œ ì„ íƒ
        function selectItemForTrade(item, type) {
            selectedTradeItem = { ...item, tradeType: type };
            updateTradeInfo();
        }

        // ê±°ë˜ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateTradeInfo() {
            if (!selectedTradeItem) return;

            document.getElementById('selectedItemName').textContent = selectedTradeItem.name;
            document.getElementById('tradePrice').textContent = selectedTradeItem.price.toLocaleString();

            const buyBtn = document.getElementById('buyBtn');
            const sellBtn = document.getElementById('sellBtn');

            if (selectedTradeItem.tradeType === 'buy') {
                buyBtn.disabled = false;
                sellBtn.disabled = true;
            } else {
                buyBtn.disabled = true;
                sellBtn.disabled = false;
            }
        }

        // ì•„ì´í…œ êµ¬ë§¤
        async function buyItem() {
            if (!selectedTradeItem || selectedTradeItem.tradeType !== 'buy') {
                showMessage('êµ¬ë§¤í•  ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”.', 'error');
                return;
            }

            if (!confirm(`"${selectedTradeItem.name}" ì•„ì´í…œì„ ${selectedTradeItem.price.toLocaleString()} ë©”ì†Œì— êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                showMessage('ì•„ì´í…œì„ êµ¬ë§¤í•˜ëŠ” ì¤‘...', 'loading');
                // ì‹¤ì œ êµ¬ë§¤ API í˜¸ì¶œ ë¡œì§ ì¶”ê°€ í•„ìš”
                showMessage('ì•„ì´í…œ êµ¬ë§¤ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                resetTrade();
            } catch (error) {
                showMessage('ì•„ì´í…œ êµ¬ë§¤ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ì•„ì´í…œ íŒë§¤
        async function sellItem() {
            if (!selectedTradeItem || selectedTradeItem.tradeType !== 'sell') {
                showMessage('íŒë§¤í•  ì•„ì´í…œì„ ì„ íƒí•˜ì„¸ìš”.', 'error');
                return;
            }

            if (!confirm(`"${selectedTradeItem.name}" ì•„ì´í…œì„ ${selectedTradeItem.price.toLocaleString()} ë©”ì†Œì— íŒë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                showMessage('ì•„ì´í…œì„ íŒë§¤í•˜ëŠ” ì¤‘...', 'loading');
                // ì‹¤ì œ íŒë§¤ API í˜¸ì¶œ ë¡œì§ ì¶”ê°€ í•„ìš”
                showMessage('ì•„ì´í…œ íŒë§¤ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                resetTrade();
            } catch (error) {
                showMessage('ì•„ì´í…œ íŒë§¤ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ê±°ë˜ ì´ˆê¸°í™”
        function resetTrade() {
            selectedTradeItem = null;
            document.getElementById('selectedItemName').textContent = 'ì—†ìŒ';
            document.getElementById('tradePrice').textContent = '0';
            document.getElementById('buyBtn').disabled = true;
            document.getElementById('sellBtn').disabled = true;
        }

        // í¼ ì„¤ì •
        function setupForm() {
            const form = document.getElementById('itemForm');
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                await addItem();
            });
        }

        // ì•„ì´í…œ ì¶”ê°€
        async function addItem() {
            const formData = new FormData(document.getElementById('itemForm'));
            const itemData = {
                name: formData.get('itemName'),
                price: parseInt(formData.get('itemPrice')),
                itemType: formData.get('itemType'),
                attackPower: parseInt(formData.get('attackPower')),
                requiredLevel: 1,
                description: formData.get('description')
            };

            try {
                showMessage('ì•„ì´í…œì„ ì¶”ê°€í•˜ëŠ” ì¤‘...', 'loading');
                const response = await fetch('/api/maple-shop/items', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(itemData)
                });

                if (response.ok) {
                    showMessage('ìƒˆë¡œìš´ ì•„ì´í…œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    document.getElementById('itemForm').reset();
                    loadItems();
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            } catch (error) {
                showMessage('ì•„ì´í…œ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ì•„ì´í…œ ìˆ˜ì •
        function editItem(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) return;

            // í¼ì— ì•„ì´í…œ ì •ë³´ ì±„ìš°ê¸°
            document.getElementById('itemName').value = item.name;
            document.getElementById('itemPrice').value = item.price;
            document.getElementById('itemType').value = item.itemType;
            document.getElementById('attackPower').value = item.attackPower;
            document.getElementById('description').value = item.description;

            // ê´€ë¦¬ íƒ­ìœ¼ë¡œ ì´ë™
            document.querySelector('[data-tab="management"]').click();
        }

        // ì•„ì´í…œ ì‚­ì œ
        async function deleteItem(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) return;

            if (!confirm(`ì •ë§ë¡œ "${item.name}" ì•„ì´í…œì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                showMessage('ì•„ì´í…œì„ ì‚­ì œí•˜ëŠ” ì¤‘...', 'loading');
                const response = await fetch(`/api/maple-shop/items/${itemId}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    showMessage(`"${item.name}" ì•„ì´í…œì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
                    loadItems();
                } else {
                    throw new Error('ì„œë²„ ì˜¤ë¥˜');
                }
            } catch (error) {
                showMessage('ì•„ì´í…œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getItemIcon(itemType) {
            const icons = {
                'í•œì†ê²€': 'âš”ï¸',
                'í™œ': 'ğŸ¹',
                'ì§€íŒ¡ì´': 'ğŸ”®'
            };
            return icons[itemType] || 'ğŸ“¦';
        }

        function getRarityClass(attackPower) {
            if (attackPower >= 100) return 'legendary';
            if (attackPower >= 50) return 'epic';
            if (attackPower >= 20) return 'rare';
            return 'common';
        }

        function showMessage(message, type = 'info') {
            const messageEl = document.getElementById('message');
            messageEl.className = `message ${type}`;
            messageEl.textContent = message;
            messageEl.style.display = 'block';

            if (type !== 'loading') {
                setTimeout(() => hideMessage(), 5000);
            }
        }

        function hideMessage() {
            document.getElementById('message').style.display = 'none';
        }
    </script>
</body>
</html>


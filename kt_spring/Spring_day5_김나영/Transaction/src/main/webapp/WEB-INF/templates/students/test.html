<!-- templates/students/test.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>트랜잭션 테스트</title>
    <style>
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        button { margin: 10px 5px; padding: 10px 15px; }
        .btn-danger { background-color: #dc3545; color: white; border: none; }
        .btn-warning { background-color: #ffc107; color: black; border: none; }
        .btn-success { background-color: #28a745; color: white; border: none; }
        .btn-secondary { background-color: #6c757d; color: white; border: none; }
    </style>
</head>
<body>
    <h1>🧪 트랜잭션 테스트</h1>

    <div class="test-section">
        <h3>❌ 트랜잭션 없는 위험한 방식</h3>
        <p>오류가 발생해도 일부 데이터는 저장됩니다.</p>
        <form method="post" action="/students/add-without-tx">
            <button type="submit" class="btn-danger">위험한 방식으로 추가</button>
        </form>
    </div>

    <div class="test-section">
        <h3>✅ 트랜잭션 있는 안전한 방식</h3>
        <p>오류가 발생하면 모든 데이터가 롤백됩니다.</p>
        <form method="post" action="/students/add-with-tx">
            <button type="submit" class="btn-warning">안전한 방식으로 추가 (오류 포함)</button>
        </form>
    </div>

    <div class="test-section">
        <h3>✅ 정상적인 추가</h3>
        <p>오류 없이 정상적으로 학생들을 추가합니다.</p>
        <form method="post" action="/students/add-safely">
            <button type="submit" class="btn-success">정상적으로 추가</button>
        </form>
    </div>

    <div class="test-section">
        <h3>🗑️ 데이터 초기화</h3>
        <p>모든 학생 데이터를 삭제합니다.</p>
        <form method="post" action="/students/clear">
            <button type="submit" class="btn-secondary"
                    onclick="return confirm('정말로 모든 데이터를 삭제하시겠습니까?')">
                모든 데이터 삭제
            </button>
        </form>
    </div>

    <br>
    <a href="/students">← 학생 목록으로 돌아가기</a>
</body>
</html>
